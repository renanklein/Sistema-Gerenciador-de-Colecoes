<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <title>Cadastro</title>
</head>

<body>
    <header>
        <nav class="navbar navbar-dark bg-dark">
            <a href="../index.html" class="navbar-brand ml-2">Controle Coleções</a>
        </nav>
    </header>
    <div class="m-5">
        <div class="card">
            <h5 class="card-header">Formulário de cadastro de item</h5>
            <div class="card-body">
                <form class="form" method="POST" action="http://localhost:5000/api/item" id="form">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="tipo">Tipo do Item:</label>
                                <select name="tipo" class="form-control" id="tipo" required>
                                    <option value="livro">Livro</option>
                                    <option value="CD">CD</option>
                                    <option value="DVD">DVD</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="nome">Nome do Item:</label>
                                <input type="text" name="nome" id="nome" class="form-control"
                                    placeholder="Digite o nome do item" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="descricao">Descrição do Item:</label>
                                <textarea name="descricao" id="descricao" 
                                cols="10" rows="5" class="form-control"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="categoria">Gênero do Item:</label>
                                <input type="text" name="categoria" id="categoria" class="form-control"
                                    placeholder="Digite o genero do item ..." required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="autor">Autor do Item:</label>
                                <input type="text" name="autor" id="autor" class="form-control"
                                    placeholder="Digite o nome do autor do item .." required>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between">
                        <a href="../index.html" class="float-left mt-2 ml-3">Voltar</a>
                        <button type="submit" class="btn btn-outline-primary mr-3">Cadastrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="../js/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
       $(document).ready(function(){
           $('#form').submit(function(event){
               event.preventDefault();
               let formData = new FormData();
               formData.set("tipo",$("#tipo").val());
               formData.set("nome",$("#nome").val());
               formData.set("descricao",$("#descricao").val());
               formData.set("categoria",$("#categoria").val());
               formData.set("autor",$("#autor").val());

               axios.post("http://localhost:5000/api/item",formData)
                    .then((resp)=>{
                        localStorage.setItem('msg','<div class="alert alert-success m-5">Cadastro realizado com sucesso !</div>');
                        window.location.replace("../index.html");
                    })
                    .catch((err) => console.log(err));
           });
       });
    </script>

</body>

</html>